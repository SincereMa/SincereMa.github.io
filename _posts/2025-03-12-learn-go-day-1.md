---
layout: post
title: "Goè¯­è¨€é«˜æ•ˆå­¦ä¹ -è¯­æ³•ä¸åŸºç¡€å…¥é—¨ (Day 1)"
date: "2025-03-12"
categories: "æŠ€æœ¯"
tags: "Goè¯­è¨€é«˜æ•ˆå­¦ä¹ " 
thumb: "/assets/images/post/Learn-Go-full.png"
---

###### é’ˆå¯¹NodeJSå·¥ç¨‹å¸ˆçš„Goè¯­è¨€å­¦ä¹ è®¡åˆ’
###### ğŸ“… é˜¶æ®µä¸€ï¼šè¯­æ³•ä¸åŸºç¡€å…¥é—¨ï¼ˆDays 1-3ï¼‰ 
###### ç›®æ ‡ï¼šæŒæ¡ä¸NodeJSå·®å¼‚æ˜¾è‘—çš„è¯­æ³•å’Œç¼–ç¨‹èŒƒå¼ã€‚ 
###### Day 1ï¼šå˜é‡ã€ç±»å‹ä¸å‡½æ•°


![](/assets/images/post/Learn-Go-full.png)

## ğŸš€ Goè¯­è¨€é«˜æ•ˆå­¦ä¹ è®¡åˆ’ï¼ˆNodeJSå·¥ç¨‹å¸ˆç‰ˆï¼‰
ç›®æ ‡ï¼š2å‘¨å¿«é€ŸæŒæ¡æ ¸å¿ƒæ¦‚å¿µï¼Œä¸Šæ‰‹å¤§å‹é¡¹ç›®ï¼›åç»­æ·±å…¥é«˜çº§ç‰¹æ€§

æœ¬æ–‡æ¶‰åŠçš„ä»£ç é“¾æ¥ï¼š[Github](https://github.com/SincereMa/Go-Learn)

## çŸ¥è¯†ç‚¹è¯¦è§£ä¸å¯¹æ¯”

### 1. å˜é‡ã€ç±»å‹ä¸å‡½æ•°

#### 1.1 çŸ­å˜é‡å£°æ˜

*   **Go:** ä½¿ç”¨ `:=` è¿›è¡ŒçŸ­å˜é‡å£°æ˜å’Œåˆå§‹åŒ–ã€‚ åªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚

    ```go
    func main() {
        x := 10 // è‡ªåŠ¨æ¨å¯¼ç±»å‹ä¸º int
        name := "Go" // è‡ªåŠ¨æ¨å¯¼ä¸º string ç±»å‹
    }
    ```
*   **Node.js (TypeScript):** ä½¿ç”¨ `let` æˆ– `const` å£°æ˜å˜é‡ã€‚`let` ç”¨äºå¯å˜å˜é‡ï¼Œ`const` ç”¨äºå¸¸é‡ã€‚

    ```typescript
    function main() {
      let x = 10; // ç±»å‹æ¨å¯¼æˆ–æ˜¾å¼ç±»å‹ let x: number = 10;
      const name = "Node.js"; // å¿…é¡»åˆå§‹åŒ–, ç±»å‹æ¨å¯¼æˆ–æ˜¾å¼ç±»å‹
    }
    ```
*   **å¯¹æ¯”:**
    *   Goçš„`:=`æ›´ç®€æ´ï¼Œä½†ä»…é™å‡½æ•°å†…ã€‚Node.jsçš„`let`/`const`æ›´çµæ´»ï¼Œä½œç”¨åŸŸæ›´å¹¿ã€‚
    *   Go å˜é‡å£°æ˜å’Œåˆå§‹åŒ–å¯ä»¥å†™åœ¨åŒä¸€è¡Œ,ä½¿ä»£ç æ›´æ¸…æ™°ã€‚

#### 1.2 é™æ€ç±»å‹ç³»ç»Ÿï¼šå¼ºç±»å‹ç‰¹å¾ä¸é›¶å€¼åˆå§‹åŒ–

*   **Go:** é™æ€å¼ºç±»å‹è¯­è¨€ã€‚æ¯ä¸ªå˜é‡åœ¨ç¼–è¯‘æ—¶éƒ½å¿…é¡»æœ‰æ˜ç¡®ç±»å‹ã€‚æœªæ˜¾å¼åˆå§‹åŒ–çš„å˜é‡ä¼šè¢«èµ‹äºˆé›¶å€¼ï¼ˆå¦‚`int`ä¸º0ï¼Œ`string`ä¸ºç©ºå­—ç¬¦ä¸²""ï¼Œ`bool` ä¸º false, æŒ‡é’ˆä¸º `nil`ï¼‰ã€‚ 

    ```go
    package main

    import "fmt"
  
    func main() {
    	var i int     // é»˜è®¤ä¸º 0
    	var s string  // é»˜è®¤ä¸º ""
    	var b bool    // é»˜è®¤ä¸º false
    	var p *int    // é»˜è®¤ä¸º nil
  
    	fmt.Println(i, s, b, p)
        // å¯ä»¥åœ¨å£°æ˜å˜é‡æ—¶ï¼ŒæŒ‡å®šå˜é‡ç±»å‹å’Œåˆå§‹å€¼ã€‚
        var number int = 10
        fmt.Println(number) // è¾“å‡º: 10
    }
    ```
*   **Node.js (TypeScript):**  TypeScript å¢åŠ äº†é™æ€ç±»å‹æ£€æŸ¥ï¼Œä½† JavaScript æœ¬èº«æ˜¯åŠ¨æ€å¼±ç±»å‹ã€‚å˜é‡ç±»å‹å¯ä»¥åœ¨è¿è¡Œæ—¶æ”¹å˜ã€‚æœªåˆå§‹åŒ–çš„å˜é‡å€¼ä¸º`undefined`ã€‚

    ```typescript
    let i: number; // å£°æ˜ä½†æœªåˆå§‹åŒ–, TSä¸­éœ€æ˜¾å¼æŒ‡å®šç±»å‹æˆ–any
    let s: string;
    console.log(i); // undefined (ä½†åœ¨TSç¼–è¯‘æ—¶é€šå¸¸ä¼šæŠ¥é”™ï¼Œé™¤éé…ç½®å…è®¸)
    console.log(s); // undefined
    ```
*   **å¯¹æ¯”:**
    *   Goçš„å¼ºç±»å‹å’Œé›¶å€¼åˆå§‹åŒ–æœ‰åŠ©äºé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸å’Œæœªå®šä¹‰è¡Œä¸ºï¼Œæé«˜ä»£ç çš„å¥å£®æ€§ã€‚
    *   TypeScript æä¾›äº†ç±»å‹æ£€æŸ¥çš„å¥½å¤„,ä½†è¿è¡Œæ—¶ä»ç„¶æ˜¯åŠ¨æ€ç±»å‹ã€‚
    *   é›¶å€¼: Go é‡Œå˜é‡æ²¡æœ‰ `undefined` çš„æ¦‚å¿µã€‚

#### 1.3 å‡½æ•°å¤šè¿”å›å€¼ä¸é”™è¯¯å¤„ç†

*   **Go:** å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼Œé€šå¸¸ç”¨äºè¿”å›ç»“æœå’Œé”™è¯¯ä¿¡æ¯ã€‚Goè¯­è¨€ä¸­é”™è¯¯å¤„ç†æ˜¯ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ï¼Œæ ‡å‡†åšæ³•æ˜¯è¿”å›ä¸€ä¸ª`error`ç±»å‹çš„å€¼ã€‚

    ```go
    func divide(a, b int) (int, error) {
      if b == 0 {
        return 0, fmt.Errorf("cannot divide by zero") // åˆ›å»ºä¸€ä¸ªé”™è¯¯
      }
      return a / b, nil // æ— é”™è¯¯æ—¶è¿”å› nil
    }
    ```
*   **Node.js (TypeScript):** é€šå¸¸ä½¿ç”¨`try...catch`å¤„ç†é”™è¯¯ï¼Œæˆ–è€…é€šè¿‡å›è°ƒå‡½æ•°ã€Promiseçš„`reject`ä¼ é€’é”™è¯¯ã€‚

    ```typescript
    function divide(a: number, b: number): number {
      if (b === 0) {
        throw new Error("Cannot divide by zero");
      }
      return a / b;
    }
  
    // æˆ–è€…ä½¿ç”¨ Promise:
    function divideAsync(a: number, b: number): Promise<number> {
      return new Promise((resolve, reject) => {
        if (b === 0) {
          reject(new Error("Cannot divide by zero"));
        } else {
          resolve(a / b);
        }
      });
    }
    ```
*   **å¯¹æ¯”ï¼š**
    *   Go æ˜¾å¼åœ°å°†é”™è¯¯ä½œä¸ºè¿”å›å€¼çš„ä¸€éƒ¨åˆ†ï¼Œå¼ºè°ƒé”™è¯¯å¤„ç†ã€‚
    *   Node ä½¿ç”¨å¼‚å¸¸æˆ– Promise æ–¹å¼å¤„ç†é”™è¯¯ã€‚
    *   Go æ›´æ¨å´‡ "é”™è¯¯å³æ˜¯å€¼" çš„å¤„ç†ç†å¿µ,é¼“åŠ±ç¨‹åºå‘˜æ˜¾å¼çš„æ£€æŸ¥å’Œå¤„ç†é”™è¯¯ã€‚
*   **è¡¥å……è¯´æ˜:**
    *   Go ä¸­ `error` æ˜¯ä¸€ä¸ªå†…ç½®æ¥å£ç±»å‹ã€‚ ä»»ä½•å®ç°äº† `Error() string` æ–¹æ³•çš„ç±»å‹éƒ½å¯ä»¥ä½œä¸ºé”™è¯¯ã€‚

### 2. å®æˆ˜ï¼šæ–‡ä»¶è¯»å–

ä¸‹é¢æ˜¯ä¸€ä¸ªå°†Node.jsæ–‡ä»¶è¯»å–è„šæœ¬æ”¹å†™æˆGoçš„ä¾‹å­ï¼Œå¯¹æ¯”ç±»å‹å®šä¹‰å’Œé”™è¯¯å¤„ç†å·®å¼‚ã€‚

#### 2.1 Node.js (TypeScript) å®ç°

```typescript
// fileRead.ts
import * as fs from 'fs/promises'; // ä½¿ç”¨ promises ç‰ˆæœ¬çš„ fs æ¨¡å—

async function readFileContent(filePath: string): Promise<string> {
  try {
    const data: string = await fs.readFile(filePath, 'utf8'); // è¯»å–æ–‡ä»¶å†…å®¹ï¼ŒæŒ‡å®šç¼–ç 
    return data; // è¿”å›è¯»å–åˆ°çš„å†…å®¹
  } catch (error: any) { // æ•è·é”™è¯¯, è¿™é‡Œç®€å•åœ°ä½¿ç”¨ any ç±»å‹
    console.error(`Error reading file: ${error.message}`); // æ‰“å°é”™è¯¯ä¿¡æ¯
    throw error; // é‡æ–°æŠ›å‡ºé”™è¯¯ï¼Œè®©è°ƒç”¨è€…å¤„ç†
  }
}

async function main() {
  try {
      // è°ƒç”¨è¯»å–æ–‡ä»¶çš„å‡½æ•°
    const content = await readFileContent('example.txt');
      // æ‰“å°è¯»å–çš„æ–‡ä»¶å†…å®¹
    console.log('File content:', content);
  } catch (error) {
      // è¿™é‡Œå¯ä»¥è¿›è¡Œæœ€ç»ˆçš„é”™è¯¯å¤„ç†
  }
}
// è°ƒç”¨mainå‡½æ•°
main()
```

#### 2.2 Go å®ç°

```go
// fileRead.go
package main

import (
	"fmt"
	"os"
)

// readFileContent å‡½æ•°è¯»å–æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶å†…å®¹
// å‚æ•°ï¼šfilePath æ–‡ä»¶è·¯å¾„
// è¿”å›å€¼ï¼šæ–‡ä»¶å†…å®¹ï¼ˆå­—ç¬¦ä¸²ï¼‰å’Œé”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœè¯»å–å¤±è´¥ï¼‰
func readFileContent(filePath string) (string, error) {
	data, err := os.ReadFile(filePath) // ä½¿ç”¨ os.ReadFile è¯»å–æ–‡ä»¶
	if err != nil {
		return "", fmt.Errorf("error reading file: %w", err) // å¦‚æœå‡ºé”™ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²å’Œæ ¼å¼åŒ–é”™è¯¯
	}
	return string(data), nil // å°†å­—èŠ‚åˆ‡ç‰‡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å› nil é”™è¯¯ï¼ˆè¡¨ç¤ºæˆåŠŸï¼‰
}

func main() {
    // è°ƒç”¨ readFileContent å‡½æ•°ï¼Œå¹¶è·å–æ–‡ä»¶å†…å®¹å’Œé”™è¯¯ä¿¡æ¯
	content, err := readFileContent("example.txt")
	if err != nil {
		fmt.Println(err) // å¦‚æœæœ‰é”™è¯¯ï¼Œç›´æ¥æ‰“å°é”™è¯¯ä¿¡æ¯
		return         //å¹¶é€€å‡ºç¨‹åº
	}
	fmt.Println("File content:", content) // å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œæ‰“å°æ–‡ä»¶å†…å®¹
}

```

**ä»£ç è§£é‡Š:**

*   **Node.js**:
    *   ä½¿ç”¨ `fs/promises` æ¨¡å—ä»¥å¼‚æ­¥æ–¹å¼è¯»å–æ–‡ä»¶ã€‚
    *   ä½¿ç”¨ `try...catch` æ•è·è¯»å–è¿‡ç¨‹ä¸­å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚
    *   `readFile` å‡½æ•°è¿”å›ä¸€ä¸ª `Promise<string>`ã€‚
*   **Go**:
    *   ä½¿ç”¨ `os.ReadFile` è¯»å–æ–‡ä»¶ã€‚
    *   `readFileContent` å‡½æ•°è¿”å› `(string, error)`ï¼Œæ˜ç¡®è¡¨ç¤ºå¯èƒ½å‡ºç°é”™è¯¯ã€‚
    *   ä½¿ç”¨ `fmt.Errorf` åˆ›å»ºåŒ…å«åŸå§‹é”™è¯¯çš„åŒ…è£…é”™è¯¯ï¼ˆ`%w` åŠ¨è¯ï¼‰ã€‚

**ä¸»è¦å·®å¼‚:**

1.  **ç±»å‹ç³»ç»Ÿ:** Goæ˜¯å¼ºç±»å‹ï¼Œå¿…é¡»æ˜¾å¼å¤„ç†å­—èŠ‚åˆ‡ç‰‡åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ã€‚Node.js (TypeScript) è™½æœ‰ç±»å‹ï¼Œä½†`fs.readFile`å¯è‡ªåŠ¨å¤„ç†ç¼–ç ã€‚

2.  **é”™è¯¯å¤„ç†:** Goä½¿ç”¨å¤šè¿”å›å€¼å’Œ`error`ç±»å‹ï¼Œå¼ºåˆ¶æ˜¾å¼é”™è¯¯æ£€æŸ¥ã€‚Node.jsä½¿ç”¨`try...catch`æˆ–Promiseçš„`reject`ã€‚

**ä»£ç æ³¨é‡Šè¯´æ˜ï¼š**

ä¸Šè¿° Go å’Œ Node.js ä»£ç çš„æ³¨é‡Šï¼Œè¯¦ç»†è§£é‡Šäº†æ¯ä¸ªå‡½æ•°å’Œå…³é”®æ­¥éª¤çš„ä½œç”¨ã€å‚æ•°ã€è¿”å›å€¼ä»¥åŠé”™è¯¯å¤„ç†é€»è¾‘ã€‚

è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•å°†Node.jsçš„å¼‚æ­¥æ–‡ä»¶è¯»å–æ“ä½œè½¬æ¢ä¸ºGoçš„åŒæ­¥ã€æ˜¾å¼é”™è¯¯å¤„ç†æ–¹å¼ï¼Œä½“ç°äº†ä¸¤ç§è¯­è¨€åœ¨ç±»å‹ç³»ç»Ÿå’Œé”™è¯¯å¤„ç†ä¸Šçš„æ ¸å¿ƒå·®å¼‚ã€‚ 

